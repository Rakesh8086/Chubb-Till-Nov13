package com.app.task3;

import java.util.*;
import java.util.stream.*;

public class Main {
    public static void main(String[] args) {
        // Simulated log data instead of file
        List<String> fakeLogs = List.of(
                "2025-11-12 10:05:21 INFO  Application started",
                "2025-11-12 10:05:25 WARN  Low memory detected",
                "2025-11-12 10:05:30 ERROR Failed to connect to database",
                "2025-11-12 10:05:45 INFO  Retrying connection",
                "2025-11-12 10:05:50 INFO  Connection successful",
                "2025-11-12 10:06:00 ERROR Timeout occurred"
        );

        // Directly parse the in-memory logs using the same parser
        List<LogEntry> logs = fakeLogs.stream()
                .map(LogReader::parseLineForTesting)
                .filter(Objects::nonNull)
                .collect(Collectors.toList());

        LogAnalyzer analyzer = new LogAnalyzer();
        analyzer.printReport(logs);
    }
}