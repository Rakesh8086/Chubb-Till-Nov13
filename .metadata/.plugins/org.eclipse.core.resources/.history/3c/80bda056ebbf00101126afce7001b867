package com.app.task2;

import java.util.concurrent.*;

public class Main {

    public static void main(String[] args) {
        UserService userService = new UserService();
        OrderService orderService = new OrderService();
        PaymentService paymentService = new PaymentService();

        System.out.println("Fetching data asynchronously...");

        CompletableFuture<String> userFuture = userService.getUserDetails();
        CompletableFuture<String> orderFuture = orderService.getOrderDetails();
        CompletableFuture<String> paymentFuture = paymentService.getPaymentStatus();

        // Combine all three
        CompletableFuture<Void> allFutures = CompletableFuture.allOf(userFuture, orderFuture, paymentFuture);

        // When all are done, print results
        allFutures.thenRun(() -> {
            try {
                System.out.println(userFuture.get());
                System.out.println(orderFuture.get());
                System.out.println(paymentFuture.get());
            } catch (InterruptedException | ExecutionException e) {
                e.printStackTrace();
            }
        });

        // Keep the main thread alive until async tasks finish
        allFutures.join();

        System.out.println("All async operations completed!");
    }
}
